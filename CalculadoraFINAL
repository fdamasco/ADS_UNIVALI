#include <stdio.h>
#include <stdlib.h>
#include <locale.h> //Biblioteca para inserir acentuação
#include <math.h> //Biblioteca matemática para possibilitar a função pow

void conversaoDecBin(int num_decimal); //Função de conversão de decimal para binário
int  conversaoBinDec(unsigned long long int num_binario); //Função de conversão de binário em decimal

//Declaração das variáveis globais
int num_decimal, bin_decimal=0, opcao, i, potencia;
unsigned long long int num_binario;
int dec_binario[20];

 //Vetor para possibilitar conversão de números maiores

int main()
{
setlocale(LC_ALL, "Portuguese"); //Habilita acentuação

do{ //Laço de repetição do menu

    // MENU DA CALCULADORA
   printf("\tCALCULADORA DE CONVERSÃO ENTRE SISTEMAS OPERACIONAIS!\n");
   printf("\tESCOLHA A OPÇÃO DE CONVERSÃO:\n");
   printf("\nDigite [1] para converter um número Decimal em Binário;\n");
   printf("Digite [2] para converter um número Binário em Decimal; ou\n");
   printf("Digite [3] para sair.\n");
   printf("Opcão escolhida: ");
   scanf("%i", &opcao); //Armazena a variável OPCAO
   switch(opcao) { //Estrutura de seleção switch

       case 1: //Opção 1: conversão de decimal para binário
           printf("\nA opcão escolhida foi: %i - Conversão de número Decimal em Binário.\n", opcao);
           printf("\nDigite um número em Decimal de zero a um milhão:\n");
           scanf("%d", &num_decimal); //Armazena a variável num_decimal
           printf("Número Binário: \n");
           conversaoDecBin(num_decimal); //Chamada da função de conversão decimal-binário
           break;

       case 2: //Opção 2: conversão de binário para decimal
           printf("\nA opcão escolhida foi: %i - Conversão de número Binário em Decimal.\n", opcao);
           printf("\nDigite um número em Binário de zero a um milhão:\n");
           scanf("%llu", &num_binario); //Armazena a variável num_binario
           printf("Número Decimal: %d\n\n\n", conversaoBinDec(num_binario)); //Chamada da função de conversão binário-decimal
           break;

       case 3: //Opção (restante) 3: sair da calculadora
           break;
       default: //Quando o usuário digitar um número não previsto
           printf("\nVocê digitou um valor inválido");
           printf("\n\n\n");
   }

} while (opcao!=3); //Sair da calculadora
    printf("\nClique em qualquer tecla para sair.");
    printf("\nAté a próxima!");
    printf("\n\n\n");

   return 0;
}

void conversaoDecBin (int num_decimal) //Função conversão decimal-binário
{
    int dec_binario[20], i=0;
    while (num_decimal != 0){ //Enquanto o número decimal digitado for diferente de zero...
           dec_binario[i] = num_decimal%2; // ...entra no laço de repetição, obtendo-se o valor do resto da divisão do número decimal por 2
           num_decimal = num_decimal/2; // Divide-se o número decimal por 2, e inicia o próximo loop
           i++; //Incremento do contador do vetor
           }
           for (i=i-1; i>=0; i--){//Decremento do vetor do máximo a 0, possibilitando a impressão restos de trás para frente, formando o número binário
               printf("%d", dec_binario[i]);
            }
           if (num_decimal=0) // Se o número decimal for igual a zero, o binário também será.
            printf("\%d", num_decimal);
            printf("\n\n\n");
}

int conversaoBinDec (unsigned long long int num_binario) //Função conversão decimal-binário
{
    int bin_decimal = 0, potencia = 0;

    while (num_binario!=0){//Enquanto o número binário for diferente de 0
               bin_decimal=bin_decimal+num_binario%10*pow(2,potencia); //entra no laço de repetição, utilizando-se a fórmula para obtrnção do número em decimal
               num_binario = num_binario/10; // Divide-se o número decimal por 10 e inicia novo loop
               potencia++; //Incremento do contador da potência
           }
            if (num_binario=0) // Se o número binário informado for igual a zero, o binário também será.
            bin_decimal=0;

    return bin_decimal; //Retorna o número decimal
}
